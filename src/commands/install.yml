description: Install JFrog CLI v2

parameters:
  version:
    type: string
    default: "2"
    description: JFrog CLI version to install

steps:
  - run:
      name: Install JFrog CLI
      command: |
        # Check if already installed
        if command -v jf &> /dev/null; then
            echo "JFrog CLI already installed: $(jf --version)"
            exit 0
        fi
        
        echo "Installing JFrog CLI (latest)..."
        curl -fL https://install-cli.jfrog.io | sh
        
        # Installer places jf in current directory, move to PATH
        if [ -f "./jf" ]; then
            sudo mv ./jf /usr/local/bin/jf || mv ./jf ~/bin/jf || true
            chmod +x /usr/local/bin/jf 2>/dev/null || chmod +x ~/bin/jf
        fi
        
        jf --version
        echo "JFrog CLI installed successfully"

